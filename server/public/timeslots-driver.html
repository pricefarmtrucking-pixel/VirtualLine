<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Driver Info — Cargill Soybean</title><style>
:root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color:#222; }
.container { max-width: 1100px; margin: 5vh auto; padding: 0 1rem; }
.card { border:1px solid #ddd; border-radius:12px; padding:1.25rem; background:#fff; box-shadow: 0 2px 12px rgba(0,0,0,.03); }
.header { display:flex; align-items:center; justify-content:space-between; margin-bottom: 1rem; }
.brand { font-weight: 800; letter-spacing:.2px; }
.actions a, .actions button { margin-right:.5rem; }
.button { padding:.6rem 1rem; border:none; border-radius:10px; cursor:pointer; text-decoration:none; display:inline-block; }
.button.primary { background:#1e90ff; color:#fff; }
.button.ghost { background:#f7f7f7; color:#222; border:1px solid #ddd; }
.small { color:#555; font-size:.95rem; }
.kbd { font-family: ui-monospace, Menlo, Consolas, monospace; background:#f3f3f3; padding:.15rem .35rem; border-radius:6px; border:1px solid #e6e6e6; }
.callout { padding:.75rem; border:1px dashed #cfe3ff; border-radius:10px; background:#f7fbff; }
.link { color:#1e90ff; text-decoration:none; }
.input { width:100%; padding:.7rem .8rem; border:1px solid #ccc; border-radius:10px; }
.row6 { display:grid; grid-template-columns: repeat(6,1fr); gap:.4rem; }
.code { font-family: ui-monospace, Menlo, Consolas, monospace; text-align:center; }
.slotgrid { display:grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap:.5rem; margin-top:.75rem; }
.slot { padding:.45rem .6rem; border:1px solid #ddd; border-radius:999px; display:inline-flex; gap:.5rem; align-items:center; }
.count { font-variant-numeric: tabular-nums; }
.table { width:100%; border-collapse: collapse; }
.table th, .table td { padding:.55rem .6rem; border-bottom:1px solid #eee; text-align:left; }
.sticky { position:sticky; top:0; background:#fff; z-index:1; }
</style></head>
<body><div class="container">
  <div class="header"><div class="brand">Cargill Soybean — Virtual Line</div><div class="actions"><a class="button ghost" href="timeslots-select.html">Back to Times</a></div></div>
  <div class="card">
    <h2>Step 2: Driver Information</h2>
    <div class="small" id="heldMeta">Held time: <span class="kbd" id="heldTime">--:--</span> • Expires in <span class="count" id="count">02:00</span> • Site: <span class="kbd" id="heldSite">-</span> • Date: <span class="kbd" id="heldDate">-</span></div>
    <form style="margin-top:.6rem;" onsubmit="return false;">
      <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:.5rem;">
        <input class="input" placeholder="License Plate *" id="plate"/>
        <input class="input" placeholder="Beans Sold Thru (Vendor) *" id="vendor"/>
        <input class="input" placeholder="Farm Name OR Ticket # *" id="farmOrTicket"/>
        <input class="input" placeholder="Carrier" id="carrier"/>
        <input class="input" placeholder="Driver Name *" id="dname"/>
        <input class="input" placeholder="Driver Phone *" id="dphone"/>
        <div style="display:flex; gap:.5rem;">
          <input class="input" type="number" placeholder="Estimated Amount *" id="est"/>
          <select class="input" id="unit"><option>Bushels</option><option>Tons</option></select>
        </div>
      </div>
      <div style="margin-top:.75rem; display:flex; gap:.5rem; flex-wrap:wrap;">
        <button class="button primary" type="button" onclick="confirmApt()">Confirm Appointment</button>
        <button class="button" type="button" onclick="releaseHold()">Cancel & Release Hold</button>
      </div>
      <p class="small" style="margin-top:.5rem;">On confirm, we’ll text a confirmation with a link to change/cancel.</p>
    </form>
  </div>
</div>
<script>
let countdownTimer=null;
function loadHold(){
  const token = new URLSearchParams(location.search).get('token');
  const hold = sessionStorage.getItem('hold');
  if (!token || !hold) { alert('No hold found. Please choose a time again.'); location.href='timeslots-select.html'; return; }
  const data = JSON.parse(hold);
  document.getElementById('heldTime').textContent = data.slot_time;
  document.getElementById('heldSite').textContent = data.site;
  document.getElementById('heldDate').textContent = data.date;

  let remaining = Math.max(0, Math.floor((data.expires_at - Date.now())/1000));
  function fmt(s){ const m = String(Math.floor(s/60)).padStart(2,'0'); const ss = String(s%60).padStart(2,'0'); return m+':'+ss; }
  const el = document.getElementById('count');
  el.textContent = fmt(remaining);
  countdownTimer = setInterval(()=>{
    remaining--; 
    el.textContent = fmt(Math.max(0, remaining));
    if (remaining <= 0) { clearInterval(countdownTimer); alert('Hold expired'); location.href='timeslots-select.html'; }
  }, 1000);
}
function confirmApt(){
  const req = ['plate','vendor','farmOrTicket','dname','dphone','est'];
  for (const id of req) { if (!document.getElementById(id).value.trim()) return alert('Please complete required fields'); }
  alert('Appointment confirmed! (mock)');
  sessionStorage.removeItem('hold'); sessionStorage.removeItem('hold_token');
  location.href = 'index.html';
}
function releaseHold(){
  sessionStorage.removeItem('hold'); sessionStorage.removeItem('hold_token');
  location.href = 'timeslots-select.html';
}
loadHold();
</script>
</body></html>